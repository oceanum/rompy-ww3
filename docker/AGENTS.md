# DOCKER KNOWLEDGE BASE

**Generated:** 2026-02-10
**Commit:** e5cdaa5
**Branch:** main

## OVERVIEW
Docker environment for WW3 model compilation and execution with Gnu Fortran and MPI support.

## STRUCTURE

```
docker/
├── Dockerfile          # Ubuntu 22.04 + WW3 6.07.1 build
└── comp.Gnu_fix        # Fixed gfortran compile flags
```

## WHERE TO LOOK

| Task | Location | Notes |
|------|----------|-------|
| WW3 build | `Dockerfile` | Complete WW3 6.07.1 compilation |
| Compiler fix | `comp.Gnu_fix` | Patched gfortran flags |
| Base image | FROM ubuntu:22.04 | MPI + NetCDF support |

## CONVENTIONS

**Docker patterns:**

- **WW3 Version**: Fixed to 6.07.1 (NOAA-EMC release)
- **Build args**: PHYSICS="ST4", COMP="Gnu", SWITCH="Ifremer1"
- **NetCDF4**: WWATCH3_NETCDF=NC4 with nf-config
- **Executables**: Copied to /usr/local/bin after build

## ANTI-PATTERNS

**Docker prohibitions:**

- **No link step**: Do not invoke link step in WW3 compilation
- **No cache pollution**: Clean apt lists after install
- **Fixed versions**: WW3 version pinned, not 'latest'

## COMMANDS

```bash
docker build -t rompy-ww3 docker/
docker run -v $(pwd):/work rompy-ww3 ww3_shel
```

## NOTES

- Required for tests that need WW3 binaries
- CI uses this image for regression tests
- Custom comp.Gnu replaces WW3's default compiler flags

---

## DEVELOPMENT GUIDELINES

### Commit Practices
**DO NOT add AI tool attributions to commits** (e.g., "Generated by...", "Co-authored-by: AI...", "Ultraworked with..."). Keep commit messages clean and focused on the actual changes.
