# WW3 mww3_test_07 Single-Grid Regression Test Configuration
#
# Test: Rectangular grid with triangular mesh (unstructured)
# Purpose: Test unstructured grid with island embedded in coarse regular grid
# Reference: https://github.com/NOAA-EMC/WW3/tree/develop/regtests/mww3_test_07
#
# NOTE: This is a SINGLE-GRID test with UNST (unstructured/triangular) grid.
# The refug.msh contains an island; the island shadow is seen on results.

run_id: "ww3_mww3_test_07_regression"
output_dir: "rompy_runs"

period:
    start: "2020-01-01T00:00:00"
    duration: "6H"
    interval: "30m"

config:
    model_type: nml

    # Shell component for ww3_shel.nml
    ww3_shel:
        domain:
            start: "20200101 000000"
            stop: "20200101 060000"
            iostyp: 1
        input_nml:
            forcing:
                winds: "F"
                water_levels: "F"
                currents: "F"
                ice_conc: "F"
        output_type:
            field:
                list: "HS FP DP DIR DPT"
        output_date:
            field:
                start: "20200101 000000"
                stride: "1800"
                stop: "20200101 060000"
        homog_count:
            n_wnd: 0
            n_lev: 0
            n_cur: 0
            n_ice: 0

    # Grid component for ww3_grid.nml - UNST grid with island
    ww3_grid:
        spectrum:
            xfr: 1.1
            freq1: 0.04177
            nk: 25
            nth: 24
        run:
            flcx: "T"
            flcy: "T"
            flcth: "T"
            flsou: "F"
        timesteps:
            dtmax: 600.0
            dtxy: 200.0
            dtkth: 300.0
            dtmin: 20.0
        grid:
            name: "Refug unstructured grid with island"
            type: "UNST"
            coord: "CART"
            clos: "NONE"
            zlim: -0.1
            dmin: 0.25
        unst:
            filename:
                model_type: data_blob
                source: "https://raw.githubusercontent.com/NOAA-EMC/WW3/refs/tags/6.07.1/regtests/mww3_test_07/input/refug.msh"
        depth:
            sf: -1.0
            filename:
                model_type: data_blob
                source: "https://raw.githubusercontent.com/NOAA-EMC/WW3/refs/tags/6.07.1/regtests/mww3_test_07/input/refug.depth"
            idla: 3

    # Parameters component for namelists.nml
    namelists:
        # Physics parameters for depth breaking only (DB1)
        sdm:
            sdbco: 0.1
